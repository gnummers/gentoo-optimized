https://github.com/ruby-concurrency/thread_safe
