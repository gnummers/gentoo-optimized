source make.conf.lto

#USE="-accessibility -test -minimal -smartcard -usb -telnet -cups -bluetooth -consolekit -elogind -pie -ssp -nls -ipv6 -doc -debug -static -static-libs fontconfig -tls-heartbeat -bindist -semantic-desktop -gstreamer -jit apparmor berkdb lrzip profile systemd udev kde qt5 X xorg opengl unicode ncurses threads curl handbook alsa gtk gtk3 split-usr truetype ssl pulseaudio hscolour gold multitarget graphite pgo lto go perl python git source gentoo-dev libssh ssh gnome gnome-keyring gtk4 wayland mdadm ffmpeg vnc matroska overlays x264 x265 usr-portage corefonts infinality initramfs device-mapper dev developer dev-libs eselect dmraid bcache dhcp dhcpcd zsh zsh-completion hwloc ompt offload caps -audit nscd systemtap sctp a52 aac aalib acl adns acpi atm appindicator audiofile bash-completion branding cairo calendar cdb cdda cgi cjk colord cracklib crypt css curl cxx dbi dbm dbus dedicated dga dri dts dv dvb dvd encode examples exif expat fastcgi fbcon fftw flac fltk fortran freetds ftp gd gdbm geoip geolocation gif glut gmp gpm gps imagemagick graphviz gsl gsm gui guile bzip gzip xz lv4 lzma rar unrar zip unzip unace hddtemp iconv icu imap imlib inotify introspection -iodbc -java javascript jbig jemalloc jpeg jpeg2k kerberos lame lash latex lcms ldap libass libcaca libffi libnotify libsamplerate libwww lm-sensors lzma lz4 lzo mad magic memcached mhash mmap mng -mono mp3 mp4 mpeg mpi mplayer mtp -musepack musicbrainz mysqli mysql nas ncurses networkmanager nntp ocaml ocamlopt odbc offensive ofx ogg openal opengl openmp opus -oss pch pcre pdf php plasma png posix postscript pulseaudio qmail-spp qt5 quicktime raw rdp readline recode rss ruby -samba sasl sdl session smp snappy sndfile snmp soap sockets socks5 libproxy proxy source sound sox speech speex spell split-usr sqlite ssl startup-notifcation svg svga syslog szip taglib tcl tk tcmalloc tcpd telemetry theora tidy tiff truetype udisks upnp upnp-av upower v4l vaapi vala vdpau vhosts videos vim vim-syntax vorbis wavpack wayland -webkit webp wmf wxwidgets x264 x265 openh264 xattr xcb xcomposite xface xft xine xinetd xml xmlrpc xmpp xpm xscreensaver xv xvid zeroconf zlib zsh-completion zstd"
#USE="-accessibility acl alsa bash-completion bcache -bindist -bluetooth branding caps ccache -consolekit crypt -cups curl cxx -debug device-mapper dev-libs dhcpcd dmraid -doc -elogind eselect fbcon ffmpeg fontconfig gd gcrypt git gmp gold graphite -gstreamer gtk gtk3 gtk4 gzip hddtemp hscolour hwloc iconv idn infinality initramfs inotify -ipv6 -java jemalloc -jit latex libssh lm-sensors lrzip lto lv4 lz4 lzma lzo mdadm -minimal mmap -mono multitarget ncurses -networkmanager -nls nscd offensive offload openal opengl openmp -oss pgo pic -pie png profile python pypy3 rar readline -samba sctp sdl -semantic-desktop session -smartcard smp snmp sockets sound source spell split-usr ssh ssl -ssp -static -static-libs syslog systemd systemtap tcmalloc tcpd telemetry -telnet test threads tidy -tls-heartbeat truetype udev udisks unicode upnp upnp-av upower -usb usr-portage vaapi vdpau vhosts vim vim-syntax vnc -webkit X x264 -x265 xattr xcb xcomposite xface xft xine xinetd xml xmlrpc xmpp xorg xpm xscreensaver xv xvid xz zeroconf zip zlib zsh zsh-completion zstd a52 aac acpi alsa bluetooth branding cairo cdda cdr cups dbus dri dts dvd dvdr elogind emboss encode exif flac gif gpm gtk icu jpeg lcms ldap libnotify mad mng mp3 mp4 mpeg ogg opengl pango pdf png policykit ppds qt5 sdl spell startup-notification svg tiff truetype vorbis udev udisks unicode upower usb wxwidgets X xcb x264 xml xv xvid berkdb crypt ncurses nls pam readline ssl tcpd zlib cli pcre seccomp fortran openmp"
#USE="sqlite matroska mime mmx mmxext mng mp3 mp4 upower glamor jemalloc jpeg jpeg2k libnotify libsamplerate lm_sensors lock aac acl acpi alsa avx bash-completion vdo loongson2f orc asm optimize optimizations flambda resize-optimization blksha1 twolame oil jsonc xla nlopt custom-cflags custom-tune override-flagomatic custom-optimization webui daemon webp lame profiling jpeg png util utils text corefonts truetype infinality fpm zip szip unzip mpi boost eclipse profiler a52 aac -accessibility acl acpi alsa bash-completion bcache berkdb -bindist -bluetooth branding cairo caps ccache cdda cdr cli -consolekit contrib crypt -cuda -cups curl cxx dbus -debug device-mapper dev-libs dhcpcd dmraid -doc dri dri3 dts -dvd -dvdr -elogind emboss encode eselect examples exif expat fbcon ffmpeg flac fontconfig fortran gcrypt gd gif git gmp go gold gpm graphite gstreamer gtk gtk3 gtk4 guile gzip handbook hddtemp hscolour hwloc iconv icu idn infinality initramfs inotify -ipv6 -java jemalloc jit jpeg latex lcms ldap libnotify libssh lm-sensors lrzip lto lv4 lz4 lzma lzo mad mdadm -minimal mmap mng mono mp3 mp4 mpeg multitarget ncurses networkmanager -nls nscd -numa nvidia offensive offload ogg openal opencl opengl openmp -oss pam pango pclmul png popcnt pch pcre pdf perl pgo pic -pie png rdesktop -rdoc policykit ppds profile pulseaudio pypy3 python qt5 rar readline ruby -samba sasl sctp sdl seccomp -semantic-desktop sndfile startup-notification sound socks5 svg session -smartcard smp snmp sockets sound source spell split-usr ssh ssl -ssp startup-notification -static -static-libs svg syslog systemd systemtap tcl tcmalloc tcpd telemetry -telnet -test threads tidy tiff tk -tls-heartbeat tools truetype udev udisks unicode upnp upnp-av upower -usb usr-portage vaapi vdpau vhosts vim vim-syntax vnc vorbis webkit wxwidgets X x264 x265 xattr xcb xcomposite xface xft xine xinetd theora threads thunar truetype udev udisks uvm xml xmlrpc xmpp xorg xpm xscreensaver xv xvid xz zeroconf zip zlib zsh zsh-completion zstd vorbis vpx vulkan webp wmf x264 x265 xpm xscreensaver xvid X zlib"
USE="a52 aac -accessibility acl acpi alsa asm avx bash-completion bcache berkdb -bindist blksha1 -bluetooth boost branding cairo caps ccache cdda cdr cli -consolekit contrib corefonts crypt -cuda -cups curl custom-cflags custom-optimization custom-tune cxx daemon dbus -debug device-mapper dev-libs dhcpcd dmraid -doc dri dri3 dts -dvd -dvdr eclipse -elogind emboss encode eselect examples exif expat fbcon ffmpeg flac flambda fontconfig fortran fpm gcrypt gd gif git glamor gmp go gold gpm graphite gstreamer gtk gtk3 gtk4 guile gzip handbook hddtemp hscolour hwloc iconv icu idn infinality initramfs inotify -ipv6 -java jemalloc jit jpeg jpeg2k jsonc lame latex lcms ldap libnotify libsamplerate libssh lm-sensors lm_sensors lock loongson2f lrzip lto lv4 lz4 lzma lzo mad matroska mdadm mime -minimal mmap mmx mmxext mng mono mp3 mp4 mpeg mpi multitarget ncurses networkmanager nlopt -nls nscd -numa nvidia offensive offload ogg oil openal opencl opengl openmp optimizations optimize orc -oss override-flagomatic pam pango pch pclmul pcre pdf perl pgo pic -pie png policykit popcnt ppds profile profiler profiling pulseaudio pypy3 python qt5 rar rdesktop -rdoc readline resize-optimization ruby -samba sasl sctp sdl seccomp -semantic-desktop session -smartcard smp sndfile snmp sockets socks5 sound source spell split-usr sqlite ssh ssl -ssp startup-notification -static -static-libs svg syslog systemd systemtap system-harfbuzz system-icu system-jpeg system-libevent system-libvpx system-lua system-sqlite system-bzip2 system-libwebp system-zlib szip tcl tcmalloc tcpd telemetry -telnet -test text theora threads thunar tidy tiff tk -tls-heartbeat tools truetype twolame udev udisks unicode unzip upnp upnp-av upower -usb usr-portage util utils uvm vaapi vdo vdpau vhosts vim vim-syntax vnc vorbis vpx vulkan webkit webp webui wmf wxwidgets X x264 x265 xattr xcb xcomposite xface xft xine xinetd xla xml xmlrpc xmpp xorg xpm xscreensaver xv xvid xz zeroconf zip zlib zsh zsh-completion zstd"

#ArchLinux riceflags from makepkg "-fbranch-target-load-optimize2 -fcx-fortran-rules -fipa-pta -fno-enforce-eh-specs -fnothrow-opt -fno-var-tracking-assignments -freschedule-modulo-scheduled-loops -fsched-pressure -fsched-spec-load -fsched-spec-load-dangerous -fsched-stalled-insns=0 -fsched2-use-superblocks -fselective-scheduling -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftree-lrs -maccumulate-outgoing-args" # -fmerge-all-constants
#ARCHLINUX_RICE="-fbranch-target-load-optimize2 -fcx-fortran-rules -fno-enforce-eh-specs -fnothrow-opt -fno-var-tracking-assignments -freschedule-modulo-scheduled-loops -fsched-pressure -fsched-spec-load -fsched-spec-load-dangerous -fsched-stalled-insns=0 -fsched2-use-superblocks -fselective-scheduling -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftree-lrs -maccumulate-outgoing-args"
#ARCHLINUX_RICE="-fbranch-target-load-optimize2 -fcx-fortran-rules -fno-enforce-eh-specs -fnothrow-opt -fno-var-tracking-assignments -freschedule-modulo-scheduled-loops -fsched-pressure -fsched-spec-load -fsched-spec-load-dangerous -fsched-stalled-insns=0 -fsched2-use-superblocks -fselective-scheduling -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftree-lrs -maccumulate-outgoing-args -fmerge-all-constants"
ARCHLINUX_RICE="-fbranch-target-load-optimize2 -fcx-fortran-rules -fipa-pta -fno-enforce-eh-specs -fnothrow-opt -fno-var-tracking-assignments -freschedule-modulo-scheduled-loops -fsched-pressure -fsched-spec-load -fsched-spec-load-dangerous -fsched-stalled-insns=0 -fsched2-use-superblocks -fselective-scheduling -fselective-scheduling2 -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -ftree-lrs -maccumulate-outgoing-args -fmerge-all-constants"

ABI_X86="64"
ACCEPT_KEYWORDS="~amd64"
ACCEPT_LICENSE="*"
ALSA_CARDS="hda-intel nvidia nv"

BINPKG_COMPRESS_FLAGS="-T 12 -c -z --best -"
BINPKG_COMPRESS="xz"
#BINPKG_COMPRESS_FLAGS="-zHtvv -L 9 -p 12"
#BINPKG_COMPRESS="lrzip"
#BINPKG_COMPRESS_FLAGS="-p 12 -c -z -q --ultra -T0 -22 -"
#BINPKG_COMPRESS="pzstd"
#BINPKG_COMPRESS="lzip"
BOOT_CFLAGS="${CFLAGS}"

PORTAGE_COMPRESS="pbzip2"
PORTAGE_COMPRESS_FLAGS="-9"
PORTAGE_BZIP2_COMMAND="pbzip2"
PORTAGE_BUNZIP2_COMMAND="pbunzip2"

BOOTSTRAP_USE="${BOOTSTRAP_USE} systemd udev"
CCACHE_DIR="/tmp/ccache"

#CFLAGS="-march=native ${CFLAGS} -pipe -g0 -falign-functions=32 ${_NO_SSP} ${ARCHLINUX_RICE}"
#CFLAGS="-march=native ${CFLAGS} -pipe -g0 -falign-functions=32 -fno-stack-protector -fno-stack-clash-protection -fstack-check=no -fno-stack-check -fprofile-use -fprofile-correction -fprofile-dir=pgo"
#CFLAGS="${CFLAGS} -fprofile-generate -fprofile-dir=/etc/portage/profile/pgo/${PN}.gen"
#CFLAGS="${CFLAGS} -fprofile-generate -fprofile-arcs -ftest-coverage -fprofile-abs-path -fbranch-probabilities -fprofile-dir=/tmp/portage/pgo"
#CFLAGS="-O2 -march=native -pipe -g0 ${_NO_SSP}" #-msse4.2
#CFLAGS="${CFLAGS} -fprofile-arcs -ftest-coverage -fprofile-abs-path -fbranch-probabilities"
CFLAGS="${CFLAGS}"

CHOST="x86_64-pc-linux-gnu"
CMAKE_C_COMPILER="command gcc $CFLAGS"
CMAKE_CXX_COMPILER="command g++ $CXXFLAGS"
CMAKE_LINKER="command ld $LDFLAGS"
CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sha sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3"
CXXFLAGS="${CFLAGS}"
DISTDIR="${PORTDIR}/distfiles"
#EGIT3_STORE_DIR="/tmp"
#EGIT_STORE_DIR="/tmp"

#EMERGE_DEFAULT_OPTS="-b --with-bdeps=y --with-bdeps-auto=y --with-test-deps=y --complete-graph y --keep-going n --quiet-fail n --binpkg-respect-use y --verbose-conflicts --autounmask y --autounmask-backtrack y --backtrack=30 --changed-deps y --changed-deps-report y --fail-clean y --newrepo"
#EMERGE_DEFAULT_OPTS="--with-bdeps y --complete-graph y --keep-going y --quiet-fail y --binpkg-respect-use y --jobs 6 --load-average 12.0 --verbose-conflicts"
#EMERGE_DEFAULT_OPTS="--with-bdeps=y --with-test-deps=y --complete-graph y --keep-going y --quiet-fail y --binpkg-respect-use y --jobs 6 --load-average 12.0"
#EMERGE_DEFAULT_OPTS="--with-bdeps=y --with-test-deps=y --complete-graph y --keep-going n --quiet-fail n --binpkg-respect-use y --jobs 6 --load-average 12.0"
#EMERGE_DEFAULT_OPTS="--keep-going n --quiet-fail n --binpkg-respect-use y --jobs 6 --load-average 12.0"
EMERGE_DEFAULT_OPTS="--keep-going n --quiet-fail n --binpkg-respect-use y"
#EMERGE_DEFAULT_OPTS="--with-bdeps=y --with-test-deps=y --complete-graph y --keep-going n --quiet-fail n --binpkg-respect-use y --verbose-conflicts --autounmask y --autounmask-backtrack y"
#EMERGE_DEFAULT_OPTS="--with-bdeps=y --with-test-deps=y --complete-graph y --keep-going n --quiet-fail n --binpkg-respect-use y --verbose-conflicts"
#EMERGE_DEFAULT_OPTS="--buildpkg=y --ask --verbose --ask-enter-invalid --keep-going n --quiet-fail n --binpkg-respect-use y --jobs 6 --load-average 12.0 --autounmask-backtrack=y --with-bdeps=y --complete-graph=y --buildpkg-exclude virtual/*"

#ESVN_STORE_DIR="/tmp"
EXTRA_FFMPEG_CONF="--enable-lto"
FCFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"

#FEATURES="buildpkg ccache -collision-protect multilib-strict userpriv usersandbox usersync userfetch"
#FEATURES="news nodoc cgroup buildpkg ccache -collision-protect -protect-owned multilib-strict userpriv usersandbox usersync userfetch binpkg-logs binpkg-multi-instance compress-index -downgrade-backup parallel-fetch parallel-install -ebuild-locks -unmerge-backup unmerge-logs xattr"
FEATURES="news nodoc cgroup buildpkg -ccache -collision-protect -protect-owned multilib-strict userpriv sandbox usersandbox usersync userfetch binpkg-logs binpkg-multi-instance compress-index -downgrade-backup parallel-fetch parallel-install -ebuild-locks -unmerge-backup unmerge-logs xattr"

GENTOO_MIRRORS="https://ftp.fau.de/gentoo"
GRUB_PLATFORMS="pc efi-64"
INPUT_DEVICES="keyboard mouse evdev libinput"
L10N="en en_US en-US"
LC_MESSAGES=C

#LDFLAGS="${LDFLAGS}"
#LDFLAGS="${LDFLAGS} -Wl,--hash-style=gnu,-z,norelro,--as-needed"
#LDFLAGS="${LDFLAGS} -Wl,--sort-common -s -Wl,-lpthread -Wl,-lgomp -Wl,-z,norelro -Wl,-z,now"
#LDFLAGS="${CFLAGS} -Wl,-O4 -Wl,--as-needed -Wl,-lpthread -Wl,-lgomp -Wl,-z,norelro -Wl,-z,now -Wl,--sort-common -fuse-linker-plugin"
#LDFLAGS="-Wl,-O4,--sort-common,--as-needed,-z,norelro,-z,now,-lgomp,-lpthread,-shared,-lgcov,--coverage,-fuse-linker-plugin"
#LDFLAGS="-Wl,-O4,--sort-common,--as-needed,-z,norelro,-z,now,-lgomp,-lpthread,-lgcov,--coverage,-fuse-linker-plugin"
LDFLAGS="${CFLAGS} -Wl,-O4,--sort-common,--as-needed,-z,norelro,-z,now,-lgomp,-lpthread -s"

LINGUAS="en en_US"
LLVM_TARGETS="AMDGPU BPF NVPTX X86 AArch64 ARM WebAssembly XCore"
LUA_TARGETS="lua53"
MAKEOPTS="-j12 -l12"
NGINX_MODULES_HTTP="access fastcgi gzip proxy rewrite"
_NO_SSP="-fno-stack-protector -fno-stack-clash-protection -fstack-check=no -fno-stack-check"
PKGDIR="${PORTDIR}/packages"
PORTAGE_BINHOST="http://packages.gentooexperimental.org/packages/amd64-unstable/"
PORTAGE_ELOG_CLASSES="qa warn"
PORTAGE_GPG_DIR="/etc/portage/gpg"
#PORTAGE_IONICE_COMMAND="ionice -c 3 -p \${PID}"
PORTAGE_NICENESS="-19"
PORTAGE_TMPDIR="/tmp"
PORTDIR_OVERLAY="/usr/local/portage"
PORTDIR="/usr/portage"
PORT_LOGDIR="/var/log/emerge-log"
PYTHON_SINGLE_TARGET="python3_8"
PYTHON_TARGETS="python3_8 python3_9 python3_7 python3_6 python2_7 pypy3"
QEMU_SOFTMMU_TARGETS="x86_64 aarch64 arm"
QEMU_USER_TARGETS="x86_64 aarch64 arm"
RUBY_TARGETS="ruby27 ruby26 ruby25"
RUSTFLAGS="-Ctarget-cpu=native"
VIDEO_CARDS="nv nvidia vesa fbdev nouveau dummy v4l"
